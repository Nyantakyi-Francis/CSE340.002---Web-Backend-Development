<% if (title) { %>
    <h1>
        <%= title %>
    </h1>
    <% } else { res.redirect('/') } %>

        <%- messages() %>

            <% if (errors) { %>
                <ul class="notice">
                    <% errors.array().forEach(error=> { %>
                        <li>
                            <%= error.msg %>
                        </li>
                        <% }) %>
                </ul>
                <% } %>

                <form id="registrationForm" action="/account/register" method="post">
                    <div class="form-group">
                        <label for="account_firstname">First Name:</label>
                        <input type="text" id="account_firstname" name="account_firstname" value="<%= locals.account_firstname %>"
                            required>
                    </div>
                
                    <div class="form-group">
                        <label for="account_lastname">Last Name:</label>
                        <input type="text" id="account_lastname" name="account_lastname" value="<%= locals.account_lastname %>"
                            required>
                    </div>
                
                    <div class="form-group">
                        <label for="account_email">Email Address:</label>
                        <input type="email" id="account_email" name="account_email" value="<%= locals.account_email %>" required
                            placeholder="Enter a valid email address">
                    </div>
                
                    <div class="form-group">
                        <label for="account_password">Password:</label>
                        <span class="password-requirements">
                            Passwords must be at least 12 characters and contain at least 1 number,
                            1 capital letter and 1 special character.
                        </span>
                        <input type="password" id="account_password" name="account_password" required
                            pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$">
                        <span class="password-toggle" id="passwordToggle">Show Password</span>
                    </div>
                
                    <button type="submit" class="btn-primary">Register</button>
                </form>

                    <p class="login-link">
                        Already have an account? <a href="/account/login">Login here</a>
                    </p>

                    <script>
                        // Show/Hide Password Toggle
                        const passwordInput = document.getElementById('account_password');
                        const passwordToggle = document.getElementById('passwordToggle');

                        passwordToggle.addEventListener('click', function () {
                            if (passwordInput.type === 'password') {
                                passwordInput.type = 'text';
                                passwordToggle.textContent = 'Hide Password';
                            } else {
                                passwordInput.type = 'password';
                                passwordToggle.textContent = 'Show Password';
                            }
                        });
                    </script>